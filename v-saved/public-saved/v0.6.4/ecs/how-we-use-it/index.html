<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US" prefix="og: http://ogp.me/ns#">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Title -->
    <title>MRjs ⬥ How We Use It</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg" />

    <!-- SEO -->
    <meta name="description" content="MRjs documentation for How We Use It" />

    <!-- Basic Open Graph -->
    <meta content="How We Use It" itemProp="name" class="next-head" />
    <meta content="MRjs documentation for How We Use It" itemProp="description"
        class="next-head" />
    <meta content="https://docs.mrjs.io/static/opengraph.jpg" itemProp="image" class="next-head" />

    <!-- Generic Open Graph -->
    <meta property="og:type" content="article" class="next-head" />
    <meta content="How We Use It" property="og:title" class="next-head" />
    <meta content="https://docs.mrjs.io/ecs/how-we-use-it/" property="og:url" class="next-head" />
    <meta content="https://docs.mrjs.io/static/opengraph.jpg" property="og:image" class="next-head" />
    <meta content="MRjs documentation for How We Use It" property="og:description"
        class="next-head" />
    <meta content="MRjs" property="og:site_name" class="next-head" />

    <!-- Analytics -->
    <script defer data-domain="docs.mrjs.io" src="https://plausible.io/js/script.js"></script>

    <!-- CSS Styles -->
    <link rel="stylesheet" type="text/css" href="/static/style.css" />

    <!-- Inline REPL -->
    <script src="/static/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <!-- <script src="/static/ace/ext-beautify.js" type="text/javascript" charset="utf-8"></script> -->
    <script src="/static/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.11/beautify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.11/beautify-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.11/beautify-html.min.js"></script>

    <script type="module" src="/static/inline-repl.js"></script>

    <!-- Sidebar selection -->
    <style>
        [data-slug="how-we-use-it"] {
            background-color: var(--accent) !important;
            color: var(--paper) !important;
            font-weight: 600;
        }
    </style>

</head>

<body>
    <div id="dim_layer"></div>

    <aside id="sidebar">
        <a href="/" class="main-logo">
            <img src="/static/mrjs-logo.svg" alt="The MRjs logo, an indigo and purple bowtie." width="110" height="30" />
        </a>

        <section>
            <div class="section-title">General</div>
                        <a class="sidebar-entry" href='/welcome/' data-slug="welcome">Welcome</a>
                        <a class="sidebar-entry" href='/debugging/' data-slug="debugging">Debugging</a>
                        <a class="sidebar-entry" href='/contribute/' data-slug="contribute">Contribute</a>
                        <a class="sidebar-entry" href='/create/' data-slug="create">Create</a>
                    </section>

        <section>
            <div class="section-title">Entity Component System</div>
            <a class="sidebar-entry" href='/ecs/what-is-it/'
                data-slug="what-is-it">What is it</a>
            <a class="sidebar-entry" href='/ecs/how-we-use-it/'
                data-slug="how-we-use-it">How We Use It</a>
            
        </section>

        <section>
            <div class="section-title">HTML tags</div>
            <a class="sidebar-entry" href='/doc/mr-a/'
                data-slug="mr-a">&lt;mr-a&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-app/'
                data-slug="mr-app">&lt;mr-app&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-button/'
                data-slug="mr-button">&lt;mr-button&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-div/'
                data-slug="mr-div">&lt;mr-div&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-entity/'
                data-slug="mr-entity">&lt;mr-entity&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-img/'
                data-slug="mr-img">&lt;mr-img&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-light/'
                data-slug="mr-light">&lt;mr-light&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-model/'
                data-slug="mr-model">&lt;mr-model&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-panel/'
                data-slug="mr-panel">&lt;mr-panel&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-skybox/'
                data-slug="mr-skybox">&lt;mr-skybox&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-stats/'
                data-slug="mr-stats">&lt;mr-stats&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-text/'
                data-slug="mr-text">&lt;mr-text&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-video/'
                data-slug="mr-video">&lt;mr-video&gt;</a>
            <a class="sidebar-entry" href='/doc/mr-volume/'
                data-slug="mr-volume">&lt;mr-volume&gt;</a>
            
        </section>

        <section>
            <div class="section-title">Events</div>
            <a class="sidebar-entry" href='/events/interaction-events/'
                data-slug="interaction-events">interaction-events</a>
            <a class="sidebar-entry" href='/events/mr-events/'
                data-slug="mr-events">mr-events</a>
            
        </section>

        <section>
            <div class="section-title">Data attributes</div>
            <a class="sidebar-entry" href='/attributes/data-camera/'
                data-slug="data-camera">data-camera</a>
            <a class="sidebar-entry" href='/attributes/data-comp-anchor/'
                data-slug="data-comp-anchor">data-comp-anchor</a>
            <a class="sidebar-entry" href='/attributes/data-comp-animation/'
                data-slug="data-comp-animation">data-comp-animation</a>
            <a class="sidebar-entry" href='/attributes/data-comp-audio/'
                data-slug="data-comp-audio">data-comp-audio</a>
            <a class="sidebar-entry" href='/attributes/data-debug/'
                data-slug="data-debug">data-debug</a>
            <a class="sidebar-entry" href='/attributes/data-lighting/'
                data-slug="data-lighting">data-lighting</a>
            <a class="sidebar-entry" href='/attributes/data-occlusion/'
                data-slug="data-occlusion">data-occlusion</a>
            <a class="sidebar-entry" href='/attributes/data-orbital/'
                data-slug="data-orbital">data-orbital</a>
            <a class="sidebar-entry" href='/attributes/data-position/'
                data-slug="data-position">data-position</a>
            <a class="sidebar-entry" href='/attributes/data-preserve-drawing-buffer/'
                data-slug="data-preserve-drawing-buffer">data-preserve-drawing-buffer</a>
            <a class="sidebar-entry" href='/attributes/data-rotation/'
                data-slug="data-rotation">data-rotation</a>
            <a class="sidebar-entry" href='/attributes/data-stats/'
                data-slug="data-stats">data-stats</a>
            
        </section>

        <section>
            <details id="js-details">
                <summary class="section-title">Javascript API</summary>
                <a class="sidebar-entry" href='/js-api/mrelement/'
                    data-slug="mrelement">MRElement</a>
                <a class="sidebar-entry" href='/js-api/mrsystem/'
                    data-slug="mrsystem">MRSystem</a>
                <a class="sidebar-entry" href='/js-api/mrapp/'
                    data-slug="mrapp">MRApp</a>
                <a class="sidebar-entry" href='/js-api/mruser/'
                    data-slug="mruser">MRUser</a>
                <a class="sidebar-entry" href='/js-api/mrhand/'
                    data-slug="mrhand">MRHand</a>
                <a class="sidebar-entry" href='/js-api/boundaryvisibilitysystem/'
                    data-slug="boundaryvisibilitysystem">BoundaryVisibilitySystem</a>
                <a class="sidebar-entry" href='/js-api/instancingsystem/'
                    data-slug="instancingsystem">InstancingSystem</a>
                <a class="sidebar-entry" href='/js-api/audiosystem/'
                    data-slug="audiosystem">AudioSystem</a>
                <a class="sidebar-entry" href='/js-api/skyboxsystem/'
                    data-slug="skyboxsystem">SkyBoxSystem</a>
                <a class="sidebar-entry" href='/js-api/physicssystem/'
                    data-slug="physicssystem">PhysicsSystem</a>
                <a class="sidebar-entry" href='/js-api/maskingsystem/'
                    data-slug="maskingsystem">MaskingSystem</a>
                <a class="sidebar-entry" href='/js-api/clippingsystem/'
                    data-slug="clippingsystem">ClippingSystem</a>
                <a class="sidebar-entry" href='/js-api/geometrystylesystem/'
                    data-slug="geometrystylesystem">GeometryStyleSystem</a>
                <a class="sidebar-entry" href='/js-api/materialstylesystem/'
                    data-slug="materialstylesystem">MaterialStyleSystem</a>
                <a class="sidebar-entry" href='/js-api/textsystem/'
                    data-slug="textsystem">TextSystem</a>
                <a class="sidebar-entry" href='/js-api/layoutsystem/'
                    data-slug="layoutsystem">LayoutSystem</a>
                <a class="sidebar-entry" href='/js-api/animationsystem/'
                    data-slug="animationsystem">AnimationSystem</a>
                <a class="sidebar-entry" href='/js-api/controlsystem/'
                    data-slug="controlsystem">ControlSystem</a>
                <a class="sidebar-entry" href='/js-api/statssystem/'
                    data-slug="statssystem">StatsSystem</a>
                <a class="sidebar-entry" href='/js-api/panelsystem/'
                    data-slug="panelsystem">PanelSystem</a>
                <a class="sidebar-entry" href='/js-api/anchorsystem/'
                    data-slug="anchorsystem">AnchorSystem</a>
                <a class="sidebar-entry" href='/js-api/mrentity/'
                    data-slug="mrentity">MREntity</a>
                <a class="sidebar-entry" href='/js-api/mrvolumeentity/'
                    data-slug="mrvolumeentity">MRVolumeEntity</a>
                <a class="sidebar-entry" href='/js-api/mrtextareaentity/'
                    data-slug="mrtextareaentity">MRTextAreaEntity</a>
                <a class="sidebar-entry" href='/js-api/mrlightentity/'
                    data-slug="mrlightentity">MRLightEntity</a>
                <a class="sidebar-entry" href='/js-api/mrtextentity/'
                    data-slug="mrtextentity">MRTextEntity</a>
                <a class="sidebar-entry" href='/js-api/mrdiventity/'
                    data-slug="mrdiventity">MRDivEntity</a>
                <a class="sidebar-entry" href='/js-api/mrmodelentity/'
                    data-slug="mrmodelentity">MRModelEntity</a>
                <a class="sidebar-entry" href='/js-api/mrimageentity/'
                    data-slug="mrimageentity">MRImageEntity</a>
                <a class="sidebar-entry" href='/js-api/mrstatsentity/'
                    data-slug="mrstatsentity">MRStatsEntity</a>
                <a class="sidebar-entry" href='/js-api/mrvideoentity/'
                    data-slug="mrvideoentity">MRVideoEntity</a>
                <a class="sidebar-entry" href='/js-api/mrmediaentity/'
                    data-slug="mrmediaentity">MRMediaEntity</a>
                <a class="sidebar-entry" href='/js-api/mrskyboxentity/'
                    data-slug="mrskyboxentity">MRSkyBoxEntity</a>
                <a class="sidebar-entry" href='/js-api/mrbuttonentity/'
                    data-slug="mrbuttonentity">MRButtonEntity</a>
                <a class="sidebar-entry" href='/js-api/mrtextinputentity/'
                    data-slug="mrtextinputentity">MRTextInputEntity</a>
                <a class="sidebar-entry" href='/js-api/mrtextfieldentity/'
                    data-slug="mrtextfieldentity">MRTextFieldEntity</a>
                <a class="sidebar-entry" href='/js-api/mrhyperlinkentity/'
                    data-slug="mrhyperlinkentity">MRHyperlinkEntity</a>
                <a class="sidebar-entry" href='/js-api/mrpanelentity/'
                    data-slug="mrpanelentity">MRPanelEntity</a>
                <a class="sidebar-entry" href='/js-api/mrplane/'
                    data-slug="mrplane">MRPlane</a>
                <a class="sidebar-entry" href='/js-api/mrclippinggeometry/'
                    data-slug="mrclippinggeometry">MRClippingGeometry</a>
                <a class="sidebar-entry" href='/js-api/global/'
                    data-slug="global">global</a>
                <a class="sidebar-entry" href='/js-api/mrplanemanager/'
                    data-slug="mrplanemanager">MRPlaneManager</a>
                

                <div class="section-title">API Extras</div>
                <a class="sidebar-entry" href='/js-api-extras/refractor/'
                    data-slug="refractor">Refractor</a>
                <a class="sidebar-entry" href='/js-api-extras/water/'
                    data-slug="water">Water</a>
                

                <div class="section-title">API Utils</div>
                <a class="sidebar-entry" href='/js-api-utils/html/'
                    data-slug="html">HTML</a>
                <a class="sidebar-entry" href='/js-api-utils/xr/'
                    data-slug="xr">XR</a>
                <a class="sidebar-entry" href='/js-api-utils/js/'
                    data-slug="js">JS</a>
                <a class="sidebar-entry" href='/js-api-utils/display/'
                    data-slug="display">Display</a>
                <a class="sidebar-entry" href='/js-api-utils/notify/'
                    data-slug="notify">Notify</a>
                <a class="sidebar-entry" href='/js-api-utils/material/'
                    data-slug="material">Material</a>
                <a class="sidebar-entry" href='/js-api-utils/color/'
                    data-slug="color">Color</a>
                <a class="sidebar-entry" href='/js-api-utils/string/'
                    data-slug="string">String</a>
                <a class="sidebar-entry" href='/js-api-utils/math/'
                    data-slug="math">Math</a>
                <a class="sidebar-entry" href='/js-api-utils/css/'
                    data-slug="css">CSS</a>
                <a class="sidebar-entry" href='/js-api-utils/physics/'
                    data-slug="physics">Physics</a>
                <a class="sidebar-entry" href='/js-api-utils/model/'
                    data-slug="model">Model</a>
                <a class="sidebar-entry" href='/js-api-utils/app/'
                    data-slug="app">App</a>
                <a class="sidebar-entry" href='/js-api-utils/geometry/'
                    data-slug="geometry">Geometry</a>
                
            </details>
        </section>

    </aside>

    <label id="hamburger">
        <svg id="hamburgerSVG" width="24" height="24" viewBox="0 0 24 24" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <line id="hamburgerLineTop" x1="4" y1="4" x2="20" y2="4" stroke="var(--ink)" stroke-width="2"
                stroke-linecap="round">
                <animate class="anim_close" attributeName="y1" values="4;12" dur="0.15s" begin="indefinite"
                    repeatCount="1" fill="freeze"></animate>
                <animate class="anim_close" attributeName="y2" values="4;12" dur="0.15s" begin="indefinite"
                    repeatCount="1" fill="freeze"></animate>
                <animate class="anim_open" attributeName="y1" values="12;4" dur="0.15s" begin="indefinite"
                    repeatCount="1" fill="freeze"></animate>
                <animate class="anim_open" attributeName="y2" values="12;4" dur="0.15s" begin="indefinite"
                    repeatCount="1" fill="freeze"></animate>
            </line>
            <line id="hamburgerLineBottom" x1="4" y1="20" x2="20" y2="20" stroke="var(--ink)" stroke-width="2"
                stroke-linecap="round">
                <animate class="anim_close" attributeName="y1" values="20;12" dur="0.15s" begin="indefinite"
                    repeatCount="1" fill="freeze"></animate>
                <animate class="anim_close" attributeName="y2" values="20;12" dur="0.15s" begin="indefinite"
                    repeatCount="1" fill="freeze"></animate>
                <animate class="anim_open" attributeName="y1" values="12;20" dur="0.15s" begin="indefinite"
                    repeatCount="1" fill="freeze"></animate>
                <animate class="anim_open" attributeName="y2" values="12;20" dur="0.15s" begin="indefinite"
                    repeatCount="1" fill="freeze"></animate>
            </line>
            <line x1="4" y1="12" x2="20" y2="12" stroke="var(--ink)" stroke-width="2" stroke-linecap="round">
            </line>
        </svg>
    </label>

    <main>
        <div class="markdown">
            <h1 id="how-do-we-use-ecs-in-mrjs"><a href="#how-do-we-use-ecs-in-mrjs" class="anchor" aria-hidden="true"></a>How do we use ECS in MRjs?</h1>
            <!-- ## Diagram

            todotodotodotodotodo

            todotodotodotodotodo

            todotodotodotodotodo

            todotodotodotodotodo -->

            <h3 id="entity-component-system"><a href="#entity-component-system" class="anchor" aria-hidden="true"></a>Entity Component System</h3>
            <p>MRjs is designed from the ground up using the Entity-Component-System Architecture. This is a common architecture implemented by Game Engines such as Unity, Unreal, and RealityKit.</p>
            <h4 id="entity"><a href="#entity" class="anchor" aria-hidden="true"></a>Entity</h4>
            <p>An Entity is an object. It stores only the most fundamental data, such as a unique identifier, a THREE.js Object3D, a physics body, and dimension data such as width and scale.</p>
            <p>Any <code>mr-*</code> tag within the <code>mr-app</code> is an Entity. <code>mr-entity</code> is the spatial equivalent of a <code>div</code>.</p>
            <p>Creating a custom Entity is as simple as creating a Custom Element via the Web Components API.</p>
            <p>Example:</p>
            <div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Spacecraft <span class="kw">extends</span> MREntity {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(){</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">object3D</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">generateSpacecraft</span>()</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// function to procedurally generate a 3D spacecraft</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">generateSpacecraft</span>(){</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>customElements<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;mr-spacecraft&#39;</span>) <span class="op">||</span> customElements<span class="op">.</span><span class="fu">define</span>(<span class="st">&#39;mr-spacecraft&#39;</span><span class="op">,</span> Spacecraft)</span></code></pre></div>
            <h4 id="systems"><a href="#systems" class="anchor" aria-hidden="true"></a>Systems</h4>
            <p>A System contains logic that is applied to all entities that have a corresponding Component, using the data stored by the component. Unlike Entities &amp; Components, Systems have no HTML representation and are implemented entirely in JavaScript.</p>
            <p>When a component is attached to or detached from an entity, it is added or removed from its System’s registry of entities.</p>
            <p>Example:</p>
            <div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> OrbitSystem <span class="kw">extends</span> MRSystem{</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">constructor</span>(){</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span>()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// called every frame</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update</span>(deltaTime<span class="op">,</span> frame) {</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span>(<span class="kw">const</span> entity <span class="kw">in</span> <span class="kw">this</span><span class="op">.</span><span class="at">registry</span>) {</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Update entity position</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> component <span class="op">=</span> entity<span class="op">.</span><span class="at">components</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;orbit&#39;</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>            component<span class="op">.</span><span class="at">radius</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>            component<span class="op">.</span><span class="at">target</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="co">//...</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            entity<span class="op">.</span><span class="at">component</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;orbit&#39;</span><span class="op">,</span> { <span class="dt">speed</span> <span class="op">:</span> <span class="dv">1</span> })</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Called when an orbit component is attached</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">attachedComponent</span>(entity) {</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="co">//...</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">// do something when an orbit component is updated</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updatedComponent</span>(entity<span class="op">,</span> oldData) {</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="co">//...</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">// do something when an orbit component is detached</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">detachedComponent</span>(entity) {</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        <span class="co">//...</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p>When you define a custom system, it listens for events triggered when the System’s corresponding component is attached, updated, or detached. In the above case, <code>data-comp-orbit</code>.</p>
            <h4 id="components"><a href="#components" class="anchor" aria-hidden="true"></a>Components</h4>
            <p>Components are attached to entities and used to store data. In MRjs they are implemented using data attributes beginning with the prefix <code>data-comp-</code>.</p>
            <p>Example:</p>
            <div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">mr-spacecraft</span><span class="ot"> data-comp-orbit</span><span class="op">=</span><span class="st">&quot;radius: 0.5; target: #user;&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">mr-spacecraft</span><span class="dt">&gt;</span></span></code></pre></div>
            <p>Note: the mapping between components and systems is 1-to-1, and the naming convention (<code>data-comp-&lt;name&gt;</code> and <code>&lt;Name&gt;System</code>) is strictly enforced.</p>
            <h2 id="defining-custom-components--systems-in-mrjs"><a href="#defining-custom-components--systems-in-mrjs" class="anchor" aria-hidden="true"></a>Defining Custom Components &amp; Systems in MRjs</h2>
            <p>A Component is defined whenever a custom <code>MRSystem</code> is created, which we create by extending the <code>MRSystem</code> class in JavaScript.</p>
            <p>If we were to create the Health system:</p>
            <div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> HealthSystem <span class="kw">extends</span> MRSystem {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <p>That system would listen for whenever the <code>data-comp-health</code> attribute is added, updated, or removed from an entity.</p>
            <h3 id="setting-and-getting-component-data"><a href="#setting-and-getting-component-data" class="anchor" aria-hidden="true"></a>Setting and Getting Component Data.</h3>
            <p>A component and be attached to an entity in HTML:</p>
            <div class="sourceCode" id="cb5"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">mr-entity</span><span class="ot"> data-comp-health</span><span class="op">=</span><span class="st">&quot;stamina: 0.99; damage: 0.1;&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">mr-entity</span><span class="dt">&gt;</span></span></code></pre></div>
            <p>You can also set and get components in JavaScript using the components API</p>
            <div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>entity<span class="op">.</span><span class="at">components</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;health&#39;</span><span class="op">,</span> {<span class="dt">stamina</span><span class="op">:</span> <span class="fl">0.99</span><span class="op">,</span> <span class="dt">damage</span><span class="op">:</span> <span class="fl">0.1</span>})</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> healthComp <span class="op">=</span> entity<span class="op">.</span><span class="at">components</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;health&#39;</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;stamina&#39;</span><span class="op">,</span> healthComp<span class="op">.</span><span class="at">stamina</span>)</span></code></pre></div>
            <p>Each system has an <code>update</code> function that is called every frame. This function can be used to update the entities in the system’s registry.</p>
            <div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span>(delta<span class="op">,</span> time) {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">const</span> entity <span class="kw">of</span> <span class="kw">this</span><span class="op">.</span><span class="at">registry</span>) {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> healthComp <span class="op">=</span> entity<span class="op">.</span><span class="at">components</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;health&#39;</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        healthComp<span class="op">.</span><span class="at">stamina</span> <span class="op">-=</span> healthComp<span class="op">.</span><span class="at">damage</span> <span class="op">*</span> <span class="fl">0.001</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        entity<span class="op">.</span><span class="at">components</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;health&#39;</span><span class="op">,</span> healthComp)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="op">...</span></span></code></pre></div>
            <p>There are also built-in functions that are called whenever a component is attached, detached, or updated. Check out the <code>MRSystems</code> docs to learn more.</p>

            <footer>
                <p>Found a typo or suggestion for the docs?</p>
                <p><a href="https://github.com/Volumetrics-io/documentation/edit/main/source/ecs/02How We Use It.md">Suggest an edit on GitHub</a>
                </p>
            </footer>
        </div>

    </main>

    <script type="text/javascript">
        let hamburger_button = document.getElementById('hamburger');
        let sidebar = document.getElementById('sidebar');
        let dim_layer = document.getElementById('dim_layer');
        let js_details = document.getElementById('js-details')
        let isOpened = false;

        const hide_sidebar = () => {
            sidebar.style.transform = "translateX(0%)";
            dim_layer.style.opacity = 0;
            setTimeout(() => {
                dim_layer.style.display = "none";
            }, 300);
            isOpened = false;
            document
                .getElementById("hamburgerSVG")
                .querySelectorAll(".anim_open")
                .forEach((i) => i.beginElement());
        };

        const show_sidebar = () => {
            sidebar.style.transform = "translateX(100%)";
            dim_layer.style.opacity = 1;
            dim_layer.style.display = "block";
            isOpened = true;
            document
                .getElementById("hamburgerSVG")
                .querySelectorAll(".anim_close")
                .forEach((i) => i.beginElement());
        };

        dim_layer.addEventListener("click", hide_sidebar);
        hamburger_button.addEventListener(
            "click",
            function () {
                if (isOpened) {
                    hide_sidebar();
                } else {
                    show_sidebar();
                }
                document.getElementById("hamburger").classList.toggle("open");
            },
            false
        );
        window.addEventListener("resize", () => {
            if (isOpened) {
                hide_sidebar();
            }
        });

        // Restore the JavaScript API <details> if it was opened
        console.log(localStorage.getItem("js-details"));
        if (localStorage.getItem("js-details")) {
            js_details.setAttribute("open", true);
        } else {
            js_details.removeAttribute("open");
        }

        // Restore the <aside> sidebar scroll position .
        let scrollTop = localStorage.getItem("sidebar-scroll") || 0;
        sidebar.scrollTop = parseInt(scrollTop, 10);

        // Store the state before unload
        window.onbeforeunload = (event) => {
            localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
            if (js_details.open) {
                localStorage.setItem("js-details", true);
            } else {
                localStorage.removeItem("js-details");
            }

        };
    </script>

</body>

</html>
